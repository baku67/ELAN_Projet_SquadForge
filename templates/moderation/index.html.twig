{% extends 'base.html.twig' %}

{% block title %}Profil utilisateur{% endblock %}

{% block body %}

    
    <header>
        <a href="{{ path('app_home') }}"><img src="{{ asset('img/logoSquadForge_Black_Rogned.png') }}" class="logoPng" /></a>
        <nav>
            <a href="{{ path('app_games') }}">JEUX</a>
            {% if app.user and "ROLE_MODO" in app.user.roles %}
                <a href="{{ path('app_moderationDashboard') }}">Modération</a>
            {% endif %}
        </nav>
    </header>
    <div class="headerUnderline"></div>

    <div class="main">

        <h2>Espace Modération</h2>

        <h3>Mots censurés</h3>
        
        <div style="display:inline-flex; flex-direction:column; width:80%;">
            {% for censureWord in censureWords %}
                <div style="display:inline-flex; justify-content:space-evenly;">
                    <p>"{{ censureWord.word }}"</p>
                    <p>{{ time_diff(censureWord.creationDate) }}</p>
                    <p>par {{ censureWord.user.pseudo }}</p>
                    <a href="{{ path('app_deleteCensure', {'id': censureWord.id }) }}">
                        <i class="fa-solid fa-xmark"></i>
                    </a>
                </div>
            {% endfor %}

            {{ form_start(formAddCensoredWord) }}
                <div class="inline" style="position:relative; margin: 5px auto;">
                    {{ form_widget(formAddCensoredWord.word) }} 
                    {{ form_widget(formAddCensoredWord.submit) }}
                </div>
            {{ form_end(formAddCensoredWord) }}
        </div>


        {# OnClick: Affiche titre en entier et pour Topic affiche le 1st msg aussi #}

        <h3>Topics en attente de validation</h3>

            {% for topic in lastWaitingTopics %}

                <a href="{{ path('app_topicDetail', {'id': topic.id}) }}">
                    <div class="topicCard" style="border-bottom: 4px solid {{ topic.game.color }}">
                        <img class="tinyLogo" src="{{ asset('img/games/tinyLogo/' ~ topic.game.tinyLogo) }}" />
                        <span class="topicTitle">{{ topic.title|capitalize }}</span>
                        <span>{{ topic.validated }}</span>
                        <span>{{ topic.user.pseudo }}</span>
                        <span class="topicCardPublishDate">{{ time_diff(topic.publishDate) }}</span>
                        {% if topic.topicPostsCount == 0 %}
                            <span style="opacity:0.5;">{{ topic.topicPostsCount }} <i class="fa-solid fa-message" style="color:grey;"></i></span>
                        {% else %}
                            <span>{{ topic.topicPostsCount }} <i class="fa-solid fa-message" style="color:{{ topic.game.color }}"></i></span>
                        {% endif %}
                    </div>
                </a>

            {% endfor %}



        <h3>Médias en attente de validation</h3>

        {# {{ dump(lastWaitingMedias)}} #}
        <div class="listContainer marginTop mediaList">

            {% for media in lastWaitingMedias %}

                <div class="mediaCard">
                    <div class="mediaCardHeader" style="border-bottom: 4px solid {{ media.game.color }}">
                        <img class="tinyLogo" src="{{ asset('img/games/tinyLogo/' ~ media.game.tinyLogo) }}" />
                        <span class="mediaTitle">{{ media.title|capitalize }}</span>
                        <span>{{ media.validated }}</span>
                        {# <span>{{ media.user.pseudo }}</span> #}
                        <span class="topicCardPublishDate">{{ time_diff(media.publishDate) }}</span>
                    </div>
                    <img src="{{ asset("img/uploads/" ~ media.url) }}" alt="media" class="mediaImg" />
                </div>

                <div>
                    <span><i class="fa-solid fa-check"></i></span>
                    <span><i class="fa-solid fa-xmark"></i></span>
                </div>

            {% endfor %}
        </div>




        

        








    </div>

{% endblock %}
